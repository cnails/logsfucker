# ‚úÖ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –¥–µ–ø–ª–æ—è

## üî¥ –ü—Ä–æ–±–ª–µ–º–∞

Backend –∏ Frontend –¥–µ–ø–ª–æ–∏–ª–∏—Å—å –Ω–∞ –æ–¥–∏–Ω URL, –≤—ã–∑—ã–≤–∞—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã:
- Backend Functions –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–ª–∏ Frontend —Å—Ç–∞—Ç–∏–∫—É
- –ò–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç

## üí° –ü—Ä–∏—á–∏–Ω–∞

Cloudflare Pages –¥–ª—è full-stack –ø—Ä–æ–µ–∫—Ç–æ–≤ —Ç—Ä–µ–±—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
- **Functions** –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –∫–æ—Ä–Ω–µ –≤ –ø–∞–ø–∫–µ `functions/`
- **–°—Ç–∞—Ç–∏–∫–∞** –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –ø–∞–ø–∫–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä `frontend/dist/`)
- **Routing** –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `_routes.json`

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:

1. **–ü–µ—Ä–µ–º–µ—Å—Ç–∏–ª–∏ Functions –≤ –∫–æ—Ä–µ–Ω—å:**
   ```
   backend/functions/api/ ‚Üí functions/api/
   ```

2. **–û–±–Ω–æ–≤–∏–ª–∏ `_routes.json`:**
   ```json
   {
     "version": 1,
     "exclude": ["/api/*"]
   }
   ```
   –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç: `/api/*` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç Functions, –æ—Å—Ç–∞–ª—å–Ω–æ–µ ‚Äî —Å—Ç–∞—Ç–∏–∫–∞.

3. **–û–±–Ω–æ–≤–∏–ª–∏ —Ö—É–∫–∏ frontend:**
   - –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π API (–Ω–∞ —Ç–æ–º –∂–µ –¥–æ–º–µ–Ω–µ)
   - `VITE_API_URL` –æ–ø—Ü–∏–æ–Ω–∞–ª–µ–Ω (—Ç–æ–ª—å–∫–æ –¥–ª—è cross-domain)

### –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:

```
logsfucker/
‚îú‚îÄ‚îÄ functions/              ‚Üê Backend Functions (–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç /api/*)
‚îÇ   ‚îî‚îÄ‚îÄ api/
‚îÇ       ‚îú‚îÄ‚îÄ logs.ts
‚îÇ       ‚îî‚îÄ‚îÄ stats.ts
‚îú‚îÄ‚îÄ frontend/               ‚Üê Frontend React
‚îÇ   ‚îî‚îÄ‚îÄ dist/              ‚Üê –°—Ç–∞—Ç–∏–∫–∞ (–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç /*)
‚îú‚îÄ‚îÄ _routes.json           ‚Üê Routing –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ wrangler.toml
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ù–∞ –æ–¥–Ω–æ–º –¥–æ–º–µ–Ω–µ `https://logsfucker.pages.dev`:

- **Frontend:** `/` (—Å—Ç–∞—Ç–∏–∫–∞ –∏–∑ `frontend/dist/`)
- **API:** `/api/logs`, `/api/stats` (Functions)

–ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤! –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ! ‚úÖ

## üì¶ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

### 1. –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è:

```bash
git add .
git commit -m "fix: —Ä–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è Cloudflare Pages full-stack"
git push origin main
```

### 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Cloudflare Pages:

–í Dashboard ‚Üí Settings ‚Üí Builds:

- **Build command:** `cd frontend && npm install && npm run build`
- **Build output:** `frontend/dist`
- **Root directory:** `/` (–ø—É—Å—Ç–æ)

–í Settings ‚Üí Functions:

- –ü—Ä–∏–≤—è–∑–∞—Ç—å D1 –±–∞–∑—É: `DB` ‚Üí `logs-db`

### 3. –ì–æ—Ç–æ–≤–æ!

Push –∑–∞–ø—É—Å—Ç–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π.

## üîç –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### Routing

`_routes.json` –≥–æ–≤–æ—Ä–∏—Ç Cloudflare:

```json
{
  "include": ["/*"],     // –í—Å—ë –∏–¥–µ—Ç –Ω–∞ —Å—Ç–∞—Ç–∏–∫—É
  "exclude": ["/api/*"]  // –ö—Ä–æ–º–µ /api/* - —ç—Ç–æ Functions
}
```

### Request flow

1. **–ó–∞–ø—Ä–æ—Å –∫ `/`:**
   - Cloudflare —Å–º–æ—Ç—Ä–∏—Ç: –µ—Å—Ç—å –≤ exclude? –ù–µ—Ç.
   - –û—Ç–¥–∞–µ—Ç —Å—Ç–∞—Ç–∏–∫—É –∏–∑ `frontend/dist/index.html`

2. **–ó–∞–ø—Ä–æ—Å –∫ `/api/logs`:**
   - Cloudflare —Å–º–æ—Ç—Ä–∏—Ç: –µ—Å—Ç—å –≤ exclude? –î–∞!
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç Function `functions/api/logs.ts`

3. **–ó–∞–ø—Ä–æ—Å –∫ `/some-page`:**
   - Cloudflare —Å–º–æ—Ç—Ä–∏—Ç: –µ—Å—Ç—å –≤ exclude? –ù–µ—Ç.
   - –û—Ç–¥–∞–µ—Ç —Å—Ç–∞—Ç–∏–∫—É (SPA —Ä–æ—É—Ç–∏–Ω–≥ —á–µ—Ä–µ–∑ `_redirects`)

## ‚ú® –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- ‚úÖ **–û–¥–∏–Ω –¥–æ–º–µ–Ω** - –Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å CORS
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ–π –¥–µ–ø–ª–æ–π** - –æ–¥–∏–Ω push, –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **Preview –¥–µ–ø–ª–æ–∏** - –∫–∞–∂–¥–∞—è –≤–µ—Ç–∫–∞ = preview URL
- ‚úÖ **–ë–µ—Å–ø–ª–∞—Ç–Ω–æ** - –Ω–∞ Free –ø–ª–∞–Ω–µ

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [DEPLOY_NOW.md](./DEPLOY_NOW.md) - —á—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ
- [CLOUDFLARE_FULLSTACK_SETUP.md](./CLOUDFLARE_FULLSTACK_SETUP.md) - –¥–µ—Ç–∞–ª–∏
- [frontend/DEPLOYMENT.md](./frontend/DEPLOYMENT.md) - –¥–µ–ø–ª–æ–π frontend

---

## üéâ –ò—Ç–æ–≥

–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞! –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é –∫–∞–∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ full-stack –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Cloudflare Pages.

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –°–º. [DEPLOY_NOW.md](./DEPLOY_NOW.md) üöÄ

---

Made with üíú and ‚ö°

